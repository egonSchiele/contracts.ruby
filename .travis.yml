dist: trusty

language: ruby

before_install:
  - gem install bundler

cache:
  bundler: true

env:
  - TEST_SUITE="bundle exec rspec && bundle exec cucumber"

script: $TEST_SUITE

rvm:
  - "1.9.2"
  - "1.9.3"
  - "2.0.0"
  - "2.1"
  - "2.2.8"
  - "2.3.5"
  - "2.4.2"

bundler_args: --without development

jobs:
  include:
    - stage: test
      env: TEST_SUITE=none
      rvm: "jruby-1.7.27"
      script: bundle exec rspec
    - stage: codestyle
      env: TEST_SUITE=none
      script: bundle exec rubocop
      rvm: "2.4.2"

stages:
  - codestyle
  - test
